<tool id="compute_stat" name="Compute statistics">
  <description>for contig files</description>
  <command interpreter="python">computeStat.py 
    #for $l in $labels:
        #if str($l.label) != "":
            Label${l.label}
        #end if
    #end for
    #for $f in $files:
        File${f.file}
    #end for
    #if $scaffold:
        Scaff${scaffold}
    #end if
    #if $reference.refGenome=="builtIn":
            Ref$builtInRef
    #elif $reference.refGenome=="uploadYour":
            Ref$uploadYourRef
    #end if
    #if str($genes) != "None":
        Gene$genes
    #end if
    Min$thresholdMin
    Max$thresholdMax
    Thr$threads $html_file.files_path
  </command>
  <inputs>
    <repeat name="labels" title="Label for contig file" help="Names of assemblies to use in reports (Recommended)">
      <param name="label" optional="false" format="text" type="text"/>
    </repeat>
    <repeat name="files" title="Fasta file" help="Files with contigs">
      <param name="file" format="fasta" type="data"/>
    </repeat>
    <conditional name="reference">
      <param name="refGenome" type="select" label="Reference genome" help="Reference genome file">
	<option value="">Do not use reference</option>
	<option value="builtIn">Use built in reference</option>
	<option value="uploadYour">Upload your reference</option>
      </param>
      <when value="builtIn">
	<param name="dbkey" type="genomebuild" label="Genome"/>
	<param name="genes" type="data" optional="true" label="Genes" help="File with gene coordinates in the reference"/>
      </when>
      <when value="uploadYour">
	<param name="uploadYourRef" type="data" label="Upload your reference"/>
	<param name="genes" type="data" optional="true" label="Genes" help="File with gene coordinates in the reference"/>
      </when>
    </conditional>
    <!-- <param name="builtInRef" type="data" optional="true" label="Choose a reference" help="Built in reference" /> -->
    <param name="thresholdMin" type="integer" size="10" value="0" label="Thresholds Minimum" help="Minimum contig length thresholds (default: 0)"/>
    <param name="thresholdMax" type="integer" size="10" value="1000" label="Thresholds Maximum" help="Maximum contig length thresholds (default: 1000)"/>
    <param name="scaffold" type="boolean" truevalue="--scaffolds" falsevalue="false" checked="False" label="Scaffolds?" help="Are the uploaded file(s) scaffolds?">Yes</param>
    <!--<param name="scaffold" type="select" label="Scaffolds" help="Are the uploaded files scaffolds (yes) or contigs (no, default)">
      <option value="yes">Yes</option>
      <option value="no" selected="true">No</option>
    </param> -->
    <param name="threads" type="text" label="Threads" help="Maximum number of threads (default: number of CPUs)"/>
  </inputs>
  <outputs>
    <data name="html_file" format="html" from_work_dir="result.html"/>
  </outputs>
  <help>
    This tool computes quast result from multiple contig files.
  </help>
</tool>
