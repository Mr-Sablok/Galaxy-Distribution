<tool id="compute_stat" name="Compute statistics">
  <description>for contig files</description>
  <command interpreter="python">computeStat.py 
    #for $l in $labels:
        #if str($l.label) != "":
            Label${l.label}
        #end if
    #end for
    #for $f in $files:
        File${f.file}
    #end for
    #if $scaffold:
        Scaff${scaffold}
    #end if
    #if $reference.refGenome=="builtIn":
            dbRef${reference.dbkey}
            #if $reference.dbgene:
                dbGene${reference.dbgene}
            #end if
    #elif $reference.refGenome=="uploadYour":
            Ref$uploadYourRef
            Gene$genes
            #end if
            #if $reference.multiRef:
               Multi${reference.multiRef}
            #end if
    #end if
    Min$thresholdMin
    Max$thresholdMax
    Thr$threads $html_file.files_path
  </command>
  <inputs>
    <repeat name="labels" title="Label for contig file" help="Names of assemblies to use in reports (Recommended)">
      <param name="label" optional="false" format="text" type="text"/>
    </repeat>
    <repeat name="files" title="Fasta file" help="Files with contigs">
      <param name="file" format="fasta" type="data"/>
    </repeat>
    <conditional name="reference">
      <param name="refGenome" type="select" label="Reference genome" help="Reference genome file">
	<option value="">Do not use reference</option>
	<option value="builtIn">Use built in reference</option>
	<option value="uploadYour">Upload your reference</option>
      </param>
      <when value="builtIn">
	<param name="dbkey" type="select" multiple="true" label="Genome" help="Hold the ctrl button to select more than one. Abbrevations: Chr - Chromosome CG - Complete genome CS- Complete sequence PS - Partial sequence P - Plasmid">
          <option value="NC_008570">A.hydrophila ATCC 7966 - NC_008570-Chr-CG</option>
          <option value="NC_003909">B.cereus ATCC 10987 - NC_003909-CG</option>
          <option value="NC_005707">B.cereus ATCC 10987 - NC_005705-P(pBc10987)-CS</option>
          <option value="NC_016776">B.fragilis 638R - NC_016776-CG</option>
          <option value="NC_010394">M.abscessus ATCC 19977 - NC_010394-P-CS</option>
          <option value="NC_010397">M.abscessus ATCC 19977 - NC_010397-Chr-CS</option>
          <option value="NC_007488">R.sphaeroides 2.4.1 - NC_007488-P(B)-CS</option>
          <option value="NC_007489">R.sphaeroides 2.4.1 - NC_007489-P(C)-CS</option>
          <option value="NC_007490">R.sphaeroides 2.4.1 - NC_007490-P(D)-CS</option>
          <option value="NC_007493">R.sphaeroides 2.4.1 - NC_007493-Chr(1)-CS</option>
          <option value="NC_007494">R.sphaeroides 2.4.1 - NC_007494-Chr(2)-CS</option>
          <option value="NC_009007">R.sphaeroides 2.4.1 - NC_009007-P(A)-PS</option>
          <option value="NC_009008">R.sphaeroides 2.4.1 - NC_009007-P(E)-PS</option>
          <option value="NC_010063">S.aureus USA300_TCH1516 - NC_010063-P(pUSA300HOUMR)-CS</option>
          <option value="NC_010079">S.aureus USA300_TCH1516 - NC_010079-Chr-CG</option>
          <option value="NC_012417">S.aureus USA300_TCH1516 - NC_012417-P(pUSA01-HOU)-CS</option>
          <option value="NC_002505">V.cholerae O1 biovar eltor str. N16961 - NC_002505-Chr(I)-CS</option>
          <option value="NC_002506">V.cholerae O1 biovar eltor str. N16961 - NC_002506-Chr(II)-CS</option>
          <option value="NC_016010">X.axonopodis pv. citrumelo - NC_016010-Chr-CG</option>
	</param>
	<param name="dbgene" type="boolean" truevalue="true" falsevalue="false" checked="False" label="Include genefile?" help="Do you want to include the corresponding genefile to the reference genome?"/>
      </when>
      <when value="uploadYour">
	<param name="uploadYourRef" type="data" format="fasta" label="Upload your reference"/>
	<param name="multiRef" type="boolean" truevalue="true" falsevalue="false" checked="False" label="Multiple Referencefiles?" help="Is this a merged reference file with multiple sequences?">Yes</param>
	<param name="genes" type="data" optional="true" label="Genes" help="File with gene coordinates in the reference"/>
      </when>
    </conditional>
    <param name="thresholdMin" type="integer" size="10" value="0" label="Thresholds Minimum" help="Minimum contig length thresholds (default: 0)"/>
    <param name="thresholdMax" type="integer" size="10" value="1000" label="Thresholds Maximum" help="Maximum contig length thresholds (default: 1000)"/>
    <param name="scaffold" type="boolean" truevalue="--scaffolds" falsevalue="false" checked="False" label="Scaffolds?" help="Are the uploaded file(s) scaffolds?">Yes</param>
    <param name="threads" type="text" label="Threads" help="Maximum number of threads (default: number of CPUs)"/>
  </inputs>
  <outputs>
    <data name="html_file" format="html" from_work_dir="result.html"/>
  </outputs>
  <help>
    This tool computes quast result from multiple contig files.
  </help>
</tool>
