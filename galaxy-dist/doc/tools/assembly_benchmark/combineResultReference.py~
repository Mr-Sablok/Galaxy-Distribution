#!/usr/bin/python
import sys, os
from pyPdf import PdfFileWriter, PdfFileReaser

def getLongestDelimiter(inputFile, key, header):
	delimiter = 0
	for line in inputFile:
		if k in key:
			if line.startswith(k.strip()):
				content = line.split(k.strip())[-1].strip()
				if delimiter < len(content):
					delimiter = len(content)
				break
	if delimiter < len(header):
		delimiter = len(header)
	return delimiter+4


def combinePlotsPdf():
    output = PdfFileWriter()
    input1 = PdfFileReader(file(path1+'/plots.pdf', "rb"))
    input2 = PdfFileReader(file(path2+'/plots.pdf', "rb"))

    for page in range(0, input1.getNumPages()):
        output.addPage(input1.getPage(page))
    for page in range(0, input2.getNumPages()):
        output.addPage(input2.getPage(page))
    outputStream = file(path3+'/tmp.pdf', 'wb')
    output.write(outputStream)
    outputStream.close()
    #Change name of pdf file
    os.system('mv '+path3+'/tmp.pdf '+path3+'/plots.pdf')

if __name__ == "__main__":
    global path1 = sys.argv[1]
    global path2 = sys.argv[2]
    global path3 = sys.argv[3]
    header = sys.argv[4]

    global element = ['# contigs (>= 0 bp)          ',
		   '# contigs (>= 1000 bp)       ',
		   'Total length (>= 0 bp)       ',
		   'Total length (>= 1000 bp)    ',
		   '# contigs                    ',
		   'Total length                 ',
		   'Largest contig               ',
		   'Reference length             ',
		   'GC (%)                       ',
		   'Reference GC (%)             ',
		   'N50                          ',
		   'NG50                         ',
		   'N75                          ',
		   'NG75                         ',
		   'L50                          ',
		   'LG50                         ',
		   'L75                          ',
		   'LG75                         ',
		   '# misassemblies              ',
		   'Misassembled contigs length  ',
		   '# local misassemblies        ',
		   '# unaligned contigs          ',
		   'Unaligned contigs length     ',
		   'Genome fraction (%)          ',
		   'Duplication ratio            ',
		   '# N\'s per 100 kbp            ',
		   '# mismatches per 100 kbp     ',
		   '# indels per 100 kbp         ',
		   '# genes                      ',
		   'Largest alignment            ',
		   'NA50                         ',
		   'NGA50                        ',
		   'NA75                         ',
                   'NGA75                        ',
		   'LA50                         ',
		   'LGA50                        ',
		   'LA75                         ',
		   'LGA75                        '
		   ]
